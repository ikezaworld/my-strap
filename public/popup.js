var e={timerSwitchElm:null,handSwitchElm:null,handSettingElm:null,inputPressCcodeElm:null,shortcutCodeElm:null,addCodeButton:null,handRadioH:null,handRadioAny:null,saveButton:null};e.timerSwitchElm=document.getElementById("timer");e.emojiButtonSwitchElm=document.getElementById("emoji-button");e.joinSpaceArrowButtonSwitchElm=document.getElementById("join-space-arrow-button");e.handSwitchElm=document.getElementById("shortcut-hand");e.handSettingElm=document.getElementById("shortcut-hand-setting");e.inputPressCcodeElm=document.getElementById("input-press-code");e.shortcutCodeElm=document.getElementById("shortcut-code");e.addCodeButton=document.getElementById("add-code");e.handRadioH=document.getElementById("hand-h");e.handRadioAny=document.getElementById("hand-any");e.saveButton=document.getElementById("save-button");var d="KeyH",r="anime",o={timer:{active:"TIMER_ACTIVE"},hand:{active:"HAND_ACTIVE",useDefault:"HAND_USE_DEFAULT",code:"HAND_CODE"},emoji:{active:"EMOJI_ACTIVE"},joinSpaceArrowButton:{active:"JOIN_SPACE_ARROW_BUTTON_ACTIVE"}},h=t=>new Promise(n=>{chrome.storage.local.set(t,()=>n())}),a=(t=null)=>new Promise(n=>{chrome.storage.local.get(t,c=>{n(t?c[t]:c)})}),u=t=>{e.timerSwitchElm.checked=!!t[o.timer.active],e.emojiButtonSwitchElm.checked=!!t[o.emoji.active],e.joinSpaceArrowButtonSwitchElm.checked=!!t[o.joinSpaceArrowButton.active],e.handSwitchElm.checked=!!t[o.hand.active];let n=!!t[o.hand.useDefault];e.handRadioH.checked=n,e.handRadioAny.checked=!n,n?e.shortcutCodeElm.value="":e.shortcutCodeElm.value=t[o.hand.code]},i=()=>{let t=e.handSettingElm.classList;var n=!1;return e.handSwitchElm.checked?(n=!0,t.remove("hide")):t.contains("hide")||t.add("hide"),n},l=t=>{document.body.removeEventListener("keydown",s),t&&document.body.addEventListener("keydown",s)},s=t=>{e.inputPressCcodeElm.value=t.code},m=()=>{var t="";return e.handSwitchElm.checked?e.handRadioH.checked?d:(e.handRadioAny.checked&&(t=e.shortcutCodeElm.value),t):t},E=async()=>{var t=await a();t[o.timer.active]=e.timerSwitchElm.checked,t[o.emoji.active]=e.emojiButtonSwitchElm.checked,t[o.joinSpaceArrowButton.active]=e.joinSpaceArrowButtonSwitchElm.checked,t[o.hand.active]=e.handSwitchElm.checked;let n=e.handRadioH.checked;t[o.hand.useDefault]=n,n?t[o.hand.code]=d:t[o.hand.code]=m(),await h(t)},S=async()=>{let t=await a();u(t),l(!0),i(),e.handSwitchElm.addEventListener("change",()=>{let n=i();l(n)}),e.addCodeButton.addEventListener("click",()=>{e.inputPressCcodeElm.value&&(e.shortcutCodeElm.value=e.inputPressCcodeElm.value)}),e.saveButton.addEventListener("click",()=>{E(),chrome.tabs.query({active:!0,currentWindow:!0},n=>{chrome.tabs.sendMessage(n[0].id,"updateStrap")})}),setTimeout(()=>{Array.from(document.querySelectorAll(".toggle-label")).forEach(c=>{c?.classList?.add(r)})},1e3)};S();
